<!doctype html>
<html lang="en">
  <head>
    <title>Minimal Websocket Example</title>
    <script type="text/javascript" src="responding-ws.js"></script>
    <script type="text/javascript" src="espusb-api.js"></script>
  </head>
  <body>
    <button onclick="espusb.echo().then(res=>log)">espusb.echo</button><br>
    <button onclick="espusb.wifiGetInfo().then(res=>log)">espusb.wifiGetInfo</button><br>
    <button onclick="espusb.wifiScan().then(res=>log)">espusb.wifiScan</button><br>
    <button onclick="espusb.systemGetClock().then(res=>log)">espusb.systemGetClock</button><br>
    <textarea id="res" rows="15"></textarea>
    <script>
    const resField = document.getElementById('res')

    const HOST = location.host || '192.168.4.1'
    const WS_URI = `ws://${HOST}/d/ws/issue`
    const espusb = new EspusbApi(WS_URI)
    
    function log(msg) {
        console.log(msg)
        resField.value = `${resField.value}\n${msg}`
    }
    </script>
  </body>
</html>

